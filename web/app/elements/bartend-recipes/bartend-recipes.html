<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="bartend-recipes">
  <template>
    <style>
      :host {
        display: block;
      }

      span {
        @apply(--paper-font-body1);
      }

      paper-card {
       display:block;
       width 100%;
       min-height: 100px;
       margin: 5px;
      }

      ul {
        list-style: none;
        padding: 0;
        margin: 3px;
      }
      .list-title {
       font-weight: bold;
      }
    </style>
    <iron-ajax auto url="{{apiUrl}}" handle-as="json" last-response="{{recipesResponse}}"></iron-ajax>
    <template is="dom-repeat" items="[[recipesResponse.recipe]]">
      <paper-card raised>
        <h2>{{item.name}}</h2>
        <div class="list-title">ingredients:</div>
        <template is="dom-repeat" items="{{item.ingredient}}">
          <ul>
            <li><span>{{item.amount}}</span> oz <span>{{item.liquid}}</span></li>
          </ul>
        </template>
        <paper-button>Make</paper-button>
      </paper-card>
    </template>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'bartend-recipes',

        properties: {
          apiUrl : {
            type: String,
            value: "http://localhost:8080/restconf/recipe"
          },
          recipes : {
            type: Array
          }
        },

        handleResponse: function(recipes) {
          self.recipes = recipes.recipe;
        },

        ready: function() {
        }
      });
    })();
  </script>
</dom-module>
