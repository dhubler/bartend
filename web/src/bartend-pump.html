<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">

<dom-module id="bartend-pump">
  <template strip-whitespace>
    <style>
    :host {
      display: block;
      border: 1px solid black;
      margin: 3px;
      padding: 10px;
    }
    .ingredient {
      list-style-type: none;      
    }
    </style>

      <li>[[pump.id]] - [[pump.liquid]]</li>
    </ul>
    <div>
      <button on-click="on">On</button>
      <button on-click="off">Off</button>
    </div>
  </template>
</dom-module>

<script>
class BartendPumpElement extends Polymer.Element {

  static get is() {
    return 'bartend-pump';
  }

  static get config() {
    return {
      properties : {
        pump: Object,
        apiUrl : String
      }
    };
  }

  off() {
    this.enable(false);
  }

  on() {
    this.enable(true);
  }

  enable(on) {
    var r = new XMLHttpRequest();
    var cmd = on ? "on" : "off";
    r.open("POST", this.apiUrl + cmd);
    r.onreadystatechange = function () {
      console.log("pump ", cmd);
    }
    r.send();
  }

  constructor() {
    super();
  }
}
customElements.define(BartendPumpElement.is, BartendPumpElement);
</script>
