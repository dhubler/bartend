<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dialog-behavior/paper-dialog-behavior.html">
<link rel="import" href="../bartend-drink/bartend-drink.html">

<!--
    `<bartend-recipe>` - Show an individual recipe. Launch point for actually 
      making the drink.
-->    
<dom-module id="bartend-recipe">
  <template strip-whitespace>
    <style>
    :host {
      display: block;
      margin: 1px;
      padding: 5px;
    }
    .ingredient {
      list-style-type: none;      
    }
    .content {
      display: flex;
      flex-direction: row;
    }
    .main {
      flex: 1;
    }
    .body {
      flex: 2;
      font-size: large;
    }
    paper-button.major {
      background-color: #2196f3;
      color: #ffffff;
    }
    .buttonBar {
      display: flex;
      flex-direction: row;
    }

    .buttonSpacer {
      flex: 1;
    }

    #makeDialog {
      display: none;
    }
    </style>
    <div class="content">
      <div class="main">
        <h1>[[recipe.name]]</h1>
        <p>[[recipe.description]]</p>
      </div>
      <div class="body">
        <ul>
        <template is="dom-repeat" items="[[recipe.ingredient]]">
          <li class="ingredient">[[item.amount]] oz [[item.liquid]]</li>
        </template>
        </ul>
        <div class="buttonBar">
          <paper-button raised class="major" on-tap="make">Make</paper-button>
          <paper-button raised on-tap="sample">Sample</paper-button>
          <bartend-drink id="drink" modal recipe="[[recipe]]"></bartend-drink>
        </div>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is : 'bartend-recipe',
      
      properties : {

        /**
         * recipe object from REST API
         */
        recipe  : {
          type : Object
        }
      },

      /**
       * pour just a sample of this recipe into the glass
       */
      sample: function() {
        this.scale(0.1);
      },

      /**
       * make this recipe
       */
      make : function() {
        this.scale(1);
      },

      /**
       * make a scaled up or down version of this recipe
       * 
       * @param {number} e.g. 0.1 for sample, 2 for a double
       */
      scale: function(multiplier) {
        this.$.drink.toggle();
        this.$.drink.start(multiplier);        
      }
    });
  </script>

</dom-module>

